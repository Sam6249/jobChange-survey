<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>魔法師對話</title>
    <style>
      .main-container {
        background-image: url("/assets/images/wizard.png");
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center top;
      }
      .dialogue-container {
        z-index: 10;
        pointer-events: none; /* 讓只有對話框可點擊 */
      }
      .dialogue-box {
        pointer-events: auto;
        min-width: 320px;
        width: 480px;
        background: rgba(0, 0, 0, 0.8);
        border: 4px solid #bf8c4a;
        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);
        /* 可加漸層邊框 */
        font-size: 18px;
        min-height: 80px;
      }
      .dialogue-name {
        font-size: 18px;
        letter-spacing: 0.08em;
      }
      .dialogue-next {
        position: absolute;
        right: 24px;
        bottom: 16px;
        background: #ffb03a;
        border: none;
        cursor: pointer;
        transition: background 0.2s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .dialogue-next:hover {
        background: #ffd43b;
      }
    </style>
  </head>
  <body>
    <div class="main-container bg-wizard d-flex justify-content-between">
      <div class="dialogue-container position-fixed start-0 end-0 bottom-0 d-flex justify-content-center">
        <div class="dialogue-box px-8 py-6 mx-auto mb-8 rounded-4 text-white position-relative">
          <div class="dialogue-name text-primary-purple fw-bold mb-4">(學院導師)</div>
          <hr />
          <div id="dialogueText" class="text-start mb-12">
            歡迎來到魔法試煉之地，勇敢的冒險者！你準備好接受挑戰了嗎？
          </div>
          <button class="dialogue-next fw-bold rounded-pill position-absolute px-4 py-1" id="nextBtn">繼續</button>
        </div>
      </div>
    </div>
    <script type="module">
      import Typer from "../assets/typer.js";
      const dialogueText = document.getElementById("dialogueText");
      const nextBtn = document.getElementById("nextBtn");
      const dialogues = [
        "哦，新的魔法學徒來了！歡迎你～讓我來為你介紹這座試煉神殿吧。",
        "神殿共有 10 層，每層都有一隻魔獸，分別與你在職場中的挑戰相對應。你必須依靠不同屬性的魔法來擊倒他們。",
        "魔法屬性有五種：火、水、風、土、光，透過回答問題，這些屬性將隨之增減，最終會影響你擊敗魔獸的能力。",
        "當你成功擊敗所有魔獸，試煉也將圓滿完成。屆時，你將揭曉最終的試煉成果，並獲得轉職的建議！",
        "現在，讓我們一起來面對第一層的挑戰吧！",
      ];
      let idx = 0;
      const typer = new Typer(dialogueText, { speed: 50 });
      // 一開始顯示第一句
      typer.type(dialogues[idx]);
      nextBtn.addEventListener("click", function () {
        idx++;
        if (idx < dialogues.length) {
          typer.type(dialogues[idx]);
        } else {
          window.location.href = "./stage1.html";
        }
      });
    </script>
    <script type="module" src="../main.js"></script>
  </body>
</html>
